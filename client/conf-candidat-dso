# conf front candidat


server {
  listen 0.0.0.0:8080;
  set_real_ip_from 0.0.0.0/0;
  real_ip_header X-Real-IP;
  real_ip_recursive on;

  client_max_body_size 10m;

  root /opt/bitnami/nginx/html/;
  
  
  location = / {
    rewrite "^.*$" /candidat;    
}

  location /candidat {
    expires 24h;
    try_files $uri $uri/ /candidat/index.html;

    location ~ "^/candidat/config-candilib.json" {
      expires -1;
      add_header 'Cache-Control' 'no-store, no-cache, must-revalidate, proxy-revalidate, max-age=0';
    }
  }

  location @rewrites {
    rewrite ^(.+)$ /candidat/index.html last;
  }




location /candidat/api/ {
proxy_pass http://candilibv2-back/;
}

location /api/ {
proxy_pass http://candilibv2-back/;
}

}


